# general
#
sudo apt-get update
sudo apt-get install mc -y
sudo apt-get install sun-java6-jdk sun-java6-jre sun-java6-bin -y
sudo apt-get install unzip -y
sudo apt-get install subversion -y
sudo apt-get install ant -y
sudo apt-get install apache2 -y

usermod -a -G deploy canab
sudo mkdir /home/downloads

sudo mkdir /var/projects
sudo chown :deploy /var/projects/
sudo chmod ug+rwx /var/projects/

sudo mkdir /home/projects
sudo chown :deploy /home/projects
sudo chmod ug+rwx /home/projects

sudo ln -s /var/projects/admin /var/www

# flex sdk
#
cd /home/downloads
sudo wget http://download.macromedia.com/pub/flex/sdk/flex_sdk_3.5.zip
sudo rm -rf /usr/lib/flex_sdk_3.5
sudo unzip flex_sdk_3.5.zip -d /usr/lib/flex_sdk_3.5
sudo chmod -R a+rx /usr/lib/flex_sdk_3.5

# haxe
#
cd /home/downloads
sudo wget http://haxe.org/file/hxinst-linux.tgz
sudo tar -xf hxinst-linux.tgz
sudo ./hxinst-linux

# haxeserver
#
cd /home/projects
svn co https://haxeserver.googlecode.com/svn/trunk haxeserver --username canab.ua --password gM9by4kJ5MB2
cd /home/projects/haxeserver/build
chmod ug+x build-server.sh
sudo cp crossdomain.xml /var/www
./build-server.sh

# start haxeserver
#
cd /var/projects/server/
sudo neko server.n 1>/dev/null 2>/tmp/haxeserver.log &
ps auxwww | grep neko

# start policyserver
#
cd /home/projects/haxeserver/policyserver/
sudo neko fpserver.n 192.168.0.101 843 crossdomain.xml >/tmp/fpserver.log &

ps auxwww | grep neko

####################
# mysql
####################
apt-get install mysql-server -y
mysqladmin -u root password root
